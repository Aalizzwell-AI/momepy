/Users/martin/anaconda3/envs/geo/lib/python3.6/site-packages/libpysal/io/iohandlers/__init__.py:25: UserWarning: SQLAlchemy and Geomet not installed, database I/O disabled
  warnings.warn('SQLAlchemy and Geomet not installed, database I/O disabled')
100%|██████████| 3224/3224 [00:02<00:00, 1589.46it/s]
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/Vinohrady/blg5.shp
Shapefile loaded.
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/Vinohrady/str.shp
Shapefile loaded.
Generating tessellation.
Bufferring geometry... 3.329769242554903e-07
Simplifying geometry... 0.8755182289751247
Densifying geometry... 1.1615292489877902
Converting multipart geometry to singlepart... 1.9740254859789275
Generating input point array... 2.0161268779775128
Generating Voronoi diagram... 4.048584639996989
Generating Voronoi ridges... 6.88070495397551
Generating Voronoi geometry... 14.474409577000188
Generating GeoDataFrame of Voronoi polygons... 20.957021267997334
Saving to temporary file... 20.980621417984366
Generating MultiPoint geometry... 23.009785186994122
Buffering MultiPoint geometry... 24.71559367098962
Spatial join of MultiPoint geometry and Voronoi polygons... 33.36270793699077
Fixing unjoined geometry: 11 problems... 63.34910512997885
Dissolving Voronoi polygons... 70.41813442198327
Preparing buffer zone for edge resolving (buffering)... 88.60231236499385
Preparing buffer zone for edge resolving (dissolving)... 89.24792531097773
Preparing buffer zone for edge resolving (quadrat cut)... 91.43913609097945
Building R-tree... 91.59762743799365
Cutting... 92.33793528197566
Saving morphological tessellation to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/Vinohrady/mm_g_tesselation.shp 93.2144046399917
Done. 95.68562788498821
Tesselation finished in 97.39727649098495

3219 buildings

---

149.6892590940115 if sjoin() buffered points
45.497154310985934 if sjoin() points
fix for first option (7 problems) 14.900420835998375
fix for second option (24 problems) 42.1519746829872
+ buffering time
 have equal len keys and value when setting with an iterable

 ---
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/p7-6.shp
Shapefile loaded.
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/itn.shp
Shapefile loaded.
Generating tessellation.
Bufferring geometry... 4.259636625647545e-07
Simplifying geometry... 1.079844832944218
Densifying geometry... 1.6194581000017934
Converting multipart geometry to singlepart... 3.129039882973302
Generating input point array... 3.276384894968942
Generating Voronoi diagram... 11.733397280971985
Generating Voronoi ridges... 17.068321726983413
Generating Voronoi geometry... 34.10658580897143
Generating GeoDataFrame of Voronoi polygons... 48.911763510957826
Saving to temporary file... 49.80639945395524
Generating MultiPoint geometry... 55.60250302194618
Buffering MultiPoint geometry... 59.75600625597872
Spatial join of MultiPoint geometry and Voronoi polygons... 80.47402977396268
Fixing unjoined geometry: 7 problems... 154.6425065259682
Dissolving Voronoi polygons... 166.38172602595296
Preparing buffer zone for edge resolving (buffering)... 225.1916029349668
Preparing buffer zone for edge resolving (dissolving)... 226.94792201399105
Preparing buffer zone for edge resolving (quadrat cut)... 231.30575532198418
Building R-tree... 232.61544365796726
Cutting... 237.03046114294557
Saving morphological tessellation to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_tesselation.shp 245.93279894598527
Done. 252.52901168598328
Tesselation finished in 259.18536906299414
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/p7-6.shp
Shapefile loaded.
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_tesselation.shp
Generating blocks.
Dissolving tesselation...
Buffering streets...
Dissolving streets...
Defining street-based blocks...
Multipart to singlepart...
Defining block ID...
Generating centroids...
Spatial join...
Warning: CRS does not match!
Attribute join (buildings)...
Attribute join (tesselation)...
Generating blocks...
Saving buildings to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/p7-6.shp
Saving tesselation to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_tesselation.shp
Saving blocks to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_blocks.shp
Done
Blocks finished in 152.918334166985
Loading file /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_tesselation.shp
Generating street edges.
Generating centroids...
Generating list of points...
Generating list of lines...
Generating rtree...
Snapping...
Forming DataFrame...
Joining DataFrames...
Cleaning DataFrames...
Merging with tesselation...
Defining merge ID...
Dissolving...
Generating unique edge ID...
Cleaning edges...
Saving street edges to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_edges.shp
Cleaning tesselation...
Tesselation spatial join [1/3]...
Tesselation spatial join [2/3]...
Tesselation spatial join [3/3]...
Saving tesselation to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/mm_g_tesselation.shp
Buildings attribute join...
Saving buildings to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/p7-6.shp
Done.
Blocks finished in 37.45895678002853
Script finished in 452.1038749489817

7617 buildings


 ---

 Loading file files/vinohrady_buildings.shp
Shapefile loaded.
Generating tessellation.
Bufferring geometry... 8.329998308909126e-07
Simplifying geometry... 0.2843722269999489
Densifying geometry... 0.46492284099986136
Converting multipart geometry to singlepart... 1.3564837179999358
Generating input point array... 1.3799698319999152
100%|███████████████████████████████████████████████████████████████████████████| 3224/3224 [00:01<00:00, 2552.76it/s]
Generating Voronoi diagram... 2.6442868099998122
Generating Voronoi ridges... 4.625331856999992
Generating Voronoi geometry... 11.158743262999906
Generating GeoDataFrame of Voronoi polygons... 15.859760489999871
Saving to temporary file... 16.26217292599995
Generating MultiPoint geometry... 18.181380666999985
Cleaning temporary files...
Buffering MultiPoint geometry... 19.544433755
Spatial join of MultiPoint geometry and Voronoi polygons... 26.338217115999896
Fixing unjoined geometry: 13 problems... 50.39471219899997
Dissolving Voronoi polygons... 59.36005610500001
Preparing buffer zone for edge resolving (buffering)... 74.63176064999993
Preparing buffer zone for edge resolving (dissolving)... 75.19913248800003
Preparing buffer zone for edge resolving (quadrat cut)... 76.56299086499985
Building R-tree... 76.68555689999994
Cutting... 77.57951720400001
Saving morphological tessellation to files/vinohrady_g_tesselation.shp 78.35471557799997
Done. 80.418856624
Tesselation finished in 81.99262458399994
Loading file files/vinohrady_streets.shp
Shapefile loaded.
Loading file files/vinohrady_buildings.shp
Shapefile loaded.
Loading file files/vinohrady_g_tesselation.shp
Shapefile loaded.
Generating blocks.
Dissolving tesselation...
Buffering streets...
Dissolving streets...
Defining street-based blocks...
Multipart to singlepart...
Defining block ID...
100%|█████████████████████████████████████████████████████████████████████████████| 292/292 [00:00<00:00, 1954.96it/s]
Generating centroids...
Spatial join...
Attribute join (tesselation)...
Generating blocks...
Multipart to singlepart...
100%|██████████████████████████████████████████████████████████████████████████████| 209/209 [00:00<00:00, 872.52it/s]
/home/ubuntu/momepy/elements.py:389: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  blocks_save['geometry'] = blocks_save.buffer(0.000000001)
/home/ubuntu/anaconda3/lib/python3.6/site-packages/geopandas/tools/sjoin.py:44: UserWarning: CRS of frames being joined does not match!
  warn('CRS of frames being joined does not match!')
Attribute join (buildings)...
Attribute join (tesselation)...
Saving buildings to files/vinohrady_buildings.shp
Saving tesselation to files/vinohrady_g_tesselation.shp
Saving blocks to files/vinohrady_g_blocks.shp
Done
Blocks finished in 30.54881520700019
Loading file files/vinohrady_g_tesselation.shp
Generating street edges.
Generating centroids...
Generating list of points...
100%|███████████████████████████████████████████████████████████████████████████| 3219/3219 [00:00<00:00, 8042.28it/s]
Generating list of lines...
100%|█████████████████████████████████████████████████████████████████████████████| 801/801 [00:00<00:00, 7677.63it/s]
Generating rtree...
100%|████████████████████████████████████████████████████████████████████████████| 801/801 [00:00<00:00, 22333.71it/s]
Snapping...
100%|███████████████████████████████████████████████████████████████████████████| 3219/3219 [00:01<00:00, 2807.42it/s]
Forming DataFrame...
Joining DataFrames...
Cleaning DataFrames...
Merging with tesselation...
Defining merge ID...
100%|███████████████████████████████████████████████████████████████████████████| 3219/3219 [00:02<00:00, 1379.54it/s]
Dissolving...
Generating unique edge ID...
100%|██████████████████████████████████████████████████████████████████████████████| 749/749 [00:00<00:00, 860.31it/s]
Cleaning edges...
/home/ubuntu/momepy/elements.py:578: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  edges_clean['geometry'] = edges_clean.buffer(0.000000001)
Saving street edges to files/vinohrady_g_edges.shp
Cleaning tesselation...
Tesselation spatial join [1/3]...
Tesselation spatial join [2/3]...
Tesselation spatial join [3/3]...
Saving tesselation to files/vinohrady_g_tesselation.shp
Buildings attribute join...
Saving buildings to files/vinohrady_buildings.shp
Done.
Street edges finished in 12.335267883999904
Script finished in 125.33606060000011

AWS


---
100%|██████████| 10441/10441 [00:01<00:00, 8050.30it/s]
100%|██████████| 10441/10441 [00:01<00:00, 5280.73it/s]
100%|██████████| 10484/10484 [00:02<00:00, 4939.27it/s]
100%|██████████| 19/19 [00:40<00:00,  2.12s/it]
Bufferring geometry...
Done in 3.4141421410022303 seconds
Simplifying geometry...
Done in 0.8676893469964853 seconds
Densifying geometry...
Done in 1.9810700419911882 seconds
Converting multipart geometry to singlepart...
Done in 0.17351582800620236 seconds
Generating input point array...
Done in 2.279728092995356 seconds
Generating Voronoi diagram...
Done in 7.114469023988931 seconds
Generating Voronoi ridges...
Done in 29.65196108300006 seconds
Generating Voronoi geometry...
Done in 28.764992274998804 seconds
Generating GeoDataFrame of Voronoi polygons...
Done in 4.841973197006155 seconds
Saving to temporary file...
Done in 7.2457219189964235 seconds
Generating MultiPoint geometry...
Done in 5.851423818996409 seconds
Cleaning temporary files...
Done in 0.0014870820014039055 seconds
Buffering MultiPoint geometry...
Done in 0.011400215997127816 seconds
Spatial join of MultiPoint geometry and Voronoi polygons...
Done in 68.05566983799508 seconds
Fixing unjoined geometry: 19 problems...
Done in 40.20567312699859 seconds
Dissolving Voronoi polygons...
Done in 78.54850316498778 seconds
Preparing buffer zone for edge resolving (buffering)...
Done in 2.384159945999272 seconds
Preparing buffer zone for edge resolving (dissolving)...
Done in 4.626269231011975 seconds
Preparing buffer zone for edge resolving (quadrat cut)...
Done in 3.604107005012338 seconds
Building R-tree...
Done in 6.963897645007819 seconds
Cutting...
Done in 21.304072196988272 seconds
Saving morphological tessellation to /Users/martin/Dropbox/StrathUni/PhD/Sample Data/Prague/P7/tess_testing.shp
Done in 7.327116560001741 seconds
Done. Tessellation finished in 325.22714386699954 seconds.

---
Loading file files/mm_buildings.shp
Shapefile loaded.
Generating tessellation.
Bufferring geometry...
100%|████████████████████████████████████████████████████████████████████| 141458/141458 [00:11<00:00, 12078.19it/s]
Done in 12.030583191000005 seconds
Simplifying geometry...
Done in 7.410992597000131 seconds
Preparing buffer zone for edge resolving (buffering)...
Done in 22.149943285000063 seconds
Preparing buffer zone for edge resolving (dissolving)...
Done in 99.06081068899994 seconds
Preparing buffer zone for edge resolving (convex hull)...
Done in 0.148427465000168 seconds
Densifying geometry...
100%|█████████████████████████████████████████████████████████████████████| 141458/141458 [00:34<00:00, 4118.38it/s]
Done in 34.64689905299974 seconds
Converting multipart geometry to singlepart...
Done in 4.466779851999945 seconds
Generating input point array...
100%|█████████████████████████████████████████████████████████████████████| 142129/142129 [00:28<00:00, 5035.05it/s]
Done in 29.77332963500021 seconds
Generating Voronoi diagram...
Done in 82.5425795279998 seconds
Generating Voronoi ridges...
Done in 283.516632414 seconds
Generating Voronoi geometry...
Done in 196.7704652530001 seconds
Generating GeoDataFrame of Voronoi polygons...
Done in 15.595447339000202 seconds
Saving to temporary file...
Done in 84.07770841100046 seconds
Generating MultiPoint geometry...
Done in 59.30282803099999 seconds
Cleaning temporary files...
Done in 0.00028187800035084365 seconds
Spatial join of MultiPoint geometry and Voronoi polygons...
Done in 586.5200197530003 seconds
Fixing unjoined geometry: 116 problems...
Building R-tree...
Done in 428.22185375200024 seconds
100%|█████████████████████████████████████████████████████████████████████████████| 116/116 [07:11<00:00,  2.95s/it]
Done in 431.4202708969997 seconds
Dissolving Voronoi polygons...
Done in 616.4075027640001 seconds
Preparing buffer zone for edge resolving (quadrat cut)...
Done in 632.2451912430006 seconds
Building R-tree...
Done in 185.25726234400008 seconds
Cutting...
 35%|█████████████████████████▊                                               | 10134/28727 [13:04<17:55, 17.29it/s]
100%|█████████████████████████████████████████████████████████████████████████| 28727/28727 [45:22<00:00, 10.55it/s]
Done in 2723.0812721790007 seconds
Saving morphological tessellation to files/mm_g_tesselation.shp
Done in 94.28885233499932 seconds
Done. Tessellation finished in 6628.937052952 seconds.
Tesselation finished in 6685.940205527

Blocks finished in 1299.7299359619992
Loading file files/mm_g_tesselation.shp
Generating street edges.
Generating centroids...
Generating list of points...
100%|█████████████████████████████████████████████████████████████████████| 141458/141458 [01:45<00:00, 1341.55it/s]
Generating list of lines...
100%|███████████████████████████████████████████████████████████████████████| 42463/42463 [00:05<00:00, 7585.91it/s]
Generating rtree...
100%|██████████████████████████████████████████████████████████████████████| 42463/42463 [00:03<00:00, 12558.30it/s]
Snapping...
100%|█████████████████████████████████████████████████████████████████████| 141458/141458 [01:07<00:00, 2092.05it/s]
Forming DataFrame...
Joining DataFrames...
Cleaning DataFrames...
Merging with tesselation...
Defining merge ID...
100%|██████████████████████████████████████████████████████████████████████| 141683/141683 [13:18<00:00, 177.44it/s]
Dissolving...
Generating unique edge ID...
100%|████████████████████████████████████████████████████████████████████████| 30054/30054 [01:09<00:00, 434.96it/s]
Cleaning edges...
/home/ubuntu/momepy/elements.py:646: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  edges_clean['geometry'] = edges_clean.buffer(0.000000001)
Saving street edges to files/mm_g_edges.shp
Cleaning tesselation...
Tesselation spatial join [1/3]...
Tesselation spatial join [2/3]...
Tesselation spatial join [3/3]...
Saving tesselation to files/mm_g_tesselation.shp
Buildings attribute join...
Saving buildings to files/mm_buildings.shp
Done.
Street edges finished in 1369.2065594220003
Script finished in 2687.123752308


Whole Prague on AWS
